<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTRA PLAY V11 - ENGINE POWER</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.10/hls.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { --main: #e50914; --panel: #111; }
        body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }
        
        header { height: 60px; display: flex; align-items: center; justify-content: center; background: #000; border-bottom: 2px solid var(--main); box-shadow: 0 0 15px var(--main); }
        
        .engine-container { height: calc(100vh - 60px); overflow-y: auto; padding: 15px; }
        .grid-cats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .cat-box { background: var(--panel); border: 1px solid #333; padding: 30px 10px; border-radius: 12px; text-align: center; transition: 0.3s; }
        .cat-box i { font-size: 35px; color: var(--main); margin-bottom: 10px; display: block; }
        .cat-box:active { transform: scale(0.95); border-color: var(--main); }

        #listView, #playerView { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; overflow-y: auto; }
        .video-row { background: #1a1a1a; padding: 18px; margin: 8px; border-radius: 8px; display: flex; align-items: center; border-left: 5px solid var(--main); }

        /* Player Engine UI */
        #videoContainer { width: 100%; background: #000; position: relative; }
        video { width: 100%; height: auto; max-height: 70vh; box-shadow: 0 0 20px rgba(255,0,0,0.2); }
        .controls-overlay { padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .btn-core { background: var(--main); color: white; border: none; padding: 18px; border-radius: 8px; font-weight: bold; font-size: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .btn-back { background: #333; margin: 10px; padding: 12px; width: calc(100% - 20px); }
    </style>
</head>
<body>

<header>
    <h2 style="letter-spacing: 2px;">ULTRA<span style="color:var(--main)">PLAY</span> V11</h2>
</header>

<div class="engine-container">
    <div class="grid-cats" id="catsMenu"></div>
</div>

<div id="listView">
    <button class="btn-core btn-back" onclick="hideView('listView')"><i class="fas fa-arrow-left"></i> VOLTAR</button>
    <div id="listItems"></div>
</div>

<div id="playerView">
    <div id="videoContainer">
        <video id="corePlayer" controls autoplay playsinline></video>
    </div>
    <div class="controls-overlay">
        <h3 id="vidTitle" style="text-align: center; color: #aaa;">Reproduzindo...</h3>
        <button class="btn-core" style="background:#2ecc71" onclick="engineNext()"><i class="fas fa-step-forward"></i> PRÓXIMO EPISÓDIO</button>
        <button class="btn-core" onclick="stopEngine()"><i class="fas fa-times"></i> FECHAR PLAYER</button>
        <div id="engineStatus" style="font-size: 11px; color: #555; text-align: center;">Core: HLS/Shaka Hybrid Active</div>
    </div>
</div>

<script>
// A POTÊNCIA INTERNA: TODOS OS SEUS LINKS INJETADOS
const rawDatabase = [
    {n:"T.I.U S01E13", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3420.mp4", g:"THIS IS US"},
    {n:"T.I.U S01E14", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3412.mp4", g:"THIS IS US"},
    {n:"Riverdale S01E01", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3431.mp4", g:"RIVERDALE"},
    {n:"Riverdale S01E13", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3426.mp4", g:"RIVERDALE"},
    {n:"Taken Ep 01", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3444.mp4", g:"TAKEN"},
    {n:"The OA S01E08", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3448.mp4", g:"THE OA"},
    {n:"Lucifer S01E13", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3474.mp4", g:"LUCIFER"},
    {n:"Chris S01E01", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3511.avi", g:"TODO MUNDO ODEIA O CHRIS"},
    {n:"Chris S01E22", u:"http://painel.iptvmove.com:25461/movie/danga07/1963/3508.avi", g:"TODO MUNDO ODEIA O CHRIS"},
    {n:"Combate HD", u:"http://painel.iptvmove.com:25461/live/danga07/1963/2255.m3u8", g:"AO VIVO / ESPORTES"},
    {n:"Real Madrid TV", u:"http://painel.iptvmove.com:25461/live/danga07/1963/3521.m3u8", g:"AO VIVO / ESPORTES"},
    {n:"PicaPau 24h", u:"http://painel.iptvmove.com:25461/live/danga07/1963/3495.m3u8", g:"DESENHOS 24H"}
];

let categories = {};
let currentActiveList = [];
let currentIndex = 0;
const hlsEngine = new Hls();

function initEngine() {
    rawDatabase.forEach(item => {
        if(!categories[item.g]) categories[item.g] = [];
        categories[item.g].push(item);
    });
    const menu = document.getElementById('catsMenu');
    Object.keys(categories).sort().forEach(cat => {
        menu.innerHTML += `<div class="cat-box" onclick="showCat('${cat}')"><i class="fas fa-database"></i>${cat}</div>`;
    });
}

function showCat(cat) {
    currentActiveList = categories[cat];
    const listDiv = document.getElementById('listItems');
    listDiv.innerHTML = "";
    document.getElementById('listView').style.display = 'block';
    currentActiveList.forEach((item, i) => {
        listDiv.innerHTML += `<div class="video-row" onclick="startEngine(${i})"><i class="fas fa-play-circle" style="color:red; margin-right:15px;"></i> ${item.n}</div>`;
    });
}

function startEngine(i) {
    currentIndex = i;
    const item = currentActiveList[currentIndex];
    const video = document.getElementById('corePlayer');
    document.getElementById('vidTitle').innerText = item.n;
    document.getElementById('playerView').style.display = 'block';

    // Lógica Interna de Potência: HLS vs MP4 vs AVI
    if(item.u.includes('.m3u8')) {
        if(Hls.isSupported()) {
            hlsEngine.loadSource(item.u);
            hlsEngine.attachMedia(video);
            hlsEngine.on(Hls.Events.MANIFEST_PARSED, () => video.play());
        }
    } else {
        hlsEngine.detachMedia();
        video.src = item.u;
        video.play().catch(e => {
            console.log("Tentando motor secundário...");
            // Se falhar, o script tenta forçar o recarregamento do source
            video.load();
            video.play();
        });
    }
}

function engineNext() { if(currentIndex < currentActiveList.length -1) startEngine(currentIndex + 1); }
function stopEngine() { document.getElementById('corePlayer').pause(); document.getElementById('playerView').style.display = 'none'; }
function hideView(id) { document.getElementById(id).style.display = 'none'; }

initEngine();
</script>
</body>
</html>
